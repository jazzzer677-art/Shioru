--// üü£ ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á Highlight
local FillColor = Color3.fromRGB(175, 25, 255)
local DepthMode = "AlwaysOnTop"
local FillTransparency = 0.5
local OutlineColor = Color3.fromRGB(255, 255, 255)
local OutlineTransparency = 0

--// üß© ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏Å
local CoreGui = game:GetService("CoreGui")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Camera = workspace.CurrentCamera
local lp = Players.LocalPlayer
local connections = {}

--// üóÇ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö Highlight
local Storage = Instance.new("Folder")
Storage.Parent = CoreGui
Storage.Name = "Highlight_Storage"

--// FOV settings
local FOVRadius = 150 -- ‡∏£‡∏±‡∏®‡∏°‡∏µ‡∏ß‡∏á‡∏Å‡∏•‡∏° FOV
local FOVCircle = Drawing.new("Circle")
FOVCircle.Radius = FOVRadius
FOVCircle.Color = Color3.fromRGB(255, 0, 0)
FOVCircle.Thickness = 2
FOVCircle.Filled = false
FOVCircle.Transparency = 0.5

--// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á Highlight
local function Highlight(plr)
	local Highlight = Instance.new("Highlight")
	Highlight.Name = plr.Name
	Highlight.FillColor = FillColor
	Highlight.DepthMode = DepthMode
	Highlight.FillTransparency = FillTransparency
	Highlight.OutlineColor = OutlineColor
	Highlight.OutlineTransparency = OutlineTransparency
	Highlight.Parent = Storage
	
	if plr.Character then
		Highlight.Adornee = plr.Character
	end
	
	connections[plr] = plr.CharacterAdded:Connect(function(char)
		Highlight.Adornee = char
	end)
end

--// ‡∏™‡∏£‡πâ‡∏≤‡∏á Highlight ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
Players.PlayerAdded:Connect(Highlight)
for _,v in pairs(Players:GetPlayers()) do
	if v ~= lp then
		Highlight(v)
	end
end

Players.PlayerRemoving:Connect(function(plr)
	if Storage:FindFirstChild(plr.Name) then
		Storage[plr.Name]:Destroy()
	end
	if connections[plr] then
		connections[plr]:Disconnect()
	end
end)

--// üü¢ Silent Aim ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô
local function GetNearestTargetInFOV()
	local mousePos = UserInputService:GetMouseLocation()
	local nearest, nearestDist = nil, math.huge

	for _, plr in pairs(Players:GetPlayers()) do
		if plr ~= lp and plr.Character and plr.Character:FindFirstChild("Head") then
			local head = plr.Character.Head
			local pos, onScreen = Camera:WorldToViewportPoint(head.Position)
			if onScreen then
				local dist = (Vector2.new(pos.X, pos.Y) - mousePos).Magnitude
				if dist < nearestDist and dist <= FOVRadius then
					nearest = plr
					nearestDist = dist
				end
			end
		end
	end

	return nearest
end

--// ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏¥‡∏á Silent Aim
local function Shoot()
	local target = GetNearestTargetInFOV()
	if target and target.Character and target.Character:FindFirstChild("Head") then
		local args = {
			Target = target.Character.Head -- ‡∏¢‡∏¥‡∏á‡πÑ‡∏õ‡∏´‡∏±‡∏ß
		}
		-- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠ RemoteEvent ‡∏ï‡∏≤‡∏°‡πÄ‡∏Å‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
		if lp.Backpack:FindFirstChild("[Revolver]") then
			local remote = lp.Backpack["[Revolver]"]:FindFirstChild("RemoteEvent")
			if remote then
				remote:FireServer(unpack(args))
			end
		end
	end
end

--// ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï FOV ‡πÅ‡∏•‡∏∞ AutoShoot
RunService.RenderStepped:Connect(function()
	local mousePos = UserInputService:GetMouseLocation()
	FOVCircle.Position = Vector2.new(mousePos.X, mousePos.Y)

	if UserInputService:IsMouseButtonPressed(Enum.UserInputType.MouseButton1) then
		Shoot()
	end
end)
